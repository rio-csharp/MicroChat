@page "/"
@using MicroChat.Client.Models
@rendermode @(new InteractiveWebAssemblyRenderMode(prerender: false))

<div class="layout @(ShowMobileContent ? "show-content" : "")">
    <Sidebar OnChatSelected="HandleChatSelected" />
    <div class="content">
        <ChatHeader OnBackClicked="HandleBackToList" ShowBackButton="ShowMobileContent" />
        <div class="chat-area">
            <ChatPanel SelectedChat="selectedConversation" />
        </div>
    </div>
</div>

@code {
    private bool ShowMobileContent = false;
    private Conversation? selectedConversation = null;

    private void HandleChatSelected(Conversation conversation)
    {
        selectedConversation = conversation;
        ShowMobileContent = true;
    }

    private void HandleBackToList()
    {
        ShowMobileContent = false;
    }
}