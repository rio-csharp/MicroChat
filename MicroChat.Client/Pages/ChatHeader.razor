<div class="chat-header">
    <div class="header-left">
        @if (ShowBackButton)
        {
            <button class="back-button" @onclick="HandleBackClick" title="返回">
                <ChatHeaderIcons Name="back" Width="24" Height="24" />
            </button>
        }
        <div class="model-icon">
            <Icon IconSlug="@ConversationService.SelectedConversation?.AIModel?.Provider?.IconSlug" />
        </div>
        <div class="model-title">@ConversationService.SelectedConversation?.Title</div>
    </div>

    <div class="header-right">

        @if (ConversationService.SelectedConversation != null)
        {
            <select class="model-selector" @bind="SelectedModelId" @bind:after="OnModelChangedAsync">
                @foreach (var model in Models)
                {
                    <option value="@model">@model</option>
                }
            </select>
        }

        <button class="container-toggle-button" @onclick="HandleToggleContainerMode" title="@(IsContainerMode ? "全宽模式" : "容器模式")">
            @if (IsContainerMode)
            {
                <ChatHeaderIcons Name="container_on" Width="20" Height="20" />
            }
            else
            {
                <ChatHeaderIcons Name="container_off" Width="20" Height="20" />
            }
        </button>

        <button class="settings-button" @onclick="HandleSettingsClick" title="设置">
            <ChatHeaderIcons Name="settings" Width="20" Height="20" />
        </button>
    </div>
</div>

@if (ShowSettings)
{
    <Settings OnClose="HandleCloseSettings" />
}
